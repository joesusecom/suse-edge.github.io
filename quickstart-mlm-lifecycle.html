<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SUSE Edge Documentation | Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Lifecycle Management with SUSE Multi-Linux Manager and…"/>
<meta name="description" content="If you need to manage very large fleets of edge clusters, we recommend to use the following solution blueprint:"/>
<meta name="book-title" content="SUSE Edge Documentation"/>
<meta name="chapter-title" content="Chapter 5. Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller"/>
<meta name="tracker-url" content="https://github.com/suse-edge/suse-edge.github.io/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Lifecycle Management with SUSE Multi-Linux Manager and…"/>
<meta property="og:description" content="If you need to manage very large fleets of edge clusters, w…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Lifecycle Management with SUSE Multi-Linux Manager and…"/>
<meta name="twitter:description" content="If you need to manage very large fleets of edge clusters, w…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    

    "headline": "Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller",
  
    "description": "Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="quickstart-suma.html" title="Chapter 4. SUSE Multi-Linux Manager"/><link rel="next" href="id-components.html" title="Part II. Components"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">SUSE Edge Documentation</a><span> / </span><a class="crumb" href="id-quick-starts.html">Quick Starts</a><span> / </span><a class="crumb" href="quickstart-mlm-lifecycle.html">Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">SUSE Edge Documentation</div><ol><li><a href="suse-edge-documentation.html" class=" "><span class="title-number"> </span><span class="title-name">SUSE Edge 3.4 Documentation</span></a></li><li class="active"><a href="id-quick-starts.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Quick Starts</span></a><ol><li><a href="quickstart-metal3.html" class=" "><span class="title-number">1 </span><span class="title-name">BMC automated deployments with Metal<sup>3</sup></span></a></li><li><a href="quickstart-elemental.html" class=" "><span class="title-number">2 </span><span class="title-name">Remote host onboarding with Elemental</span></a></li><li><a href="quickstart-eib.html" class=" "><span class="title-number">3 </span><span class="title-name">Standalone clusters with Edge Image Builder</span></a></li><li><a href="quickstart-suma.html" class=" "><span class="title-number">4 </span><span class="title-name">SUSE Multi-Linux Manager</span></a></li><li><a href="quickstart-mlm-lifecycle.html" class=" you-are-here"><span class="title-number">5 </span><span class="title-name">Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller</span></a></li></ol></li><li><a href="id-components.html" class="has-children "><span class="title-number">II </span><span class="title-name">Components</span></a><ol><li><a href="components-rancher.html" class=" "><span class="title-number">6 </span><span class="title-name">Rancher</span></a></li><li><a href="components-rancher-dashboard-extensions.html" class=" "><span class="title-number">7 </span><span class="title-name">Rancher Dashboard Extensions</span></a></li><li><a href="components-rancher-turtles.html" class=" "><span class="title-number">8 </span><span class="title-name">Rancher Turtles</span></a></li><li><a href="components-fleet.html" class=" "><span class="title-number">9 </span><span class="title-name">Fleet</span></a></li><li><a href="components-slmicro.html" class=" "><span class="title-number">10 </span><span class="title-name">SUSE Linux Micro</span></a></li><li><a href="components-metal3.html" class=" "><span class="title-number">11 </span><span class="title-name">Metal<sup>3</sup></span></a></li><li><a href="components-eib.html" class=" "><span class="title-number">12 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="components-nmc.html" class=" "><span class="title-number">13 </span><span class="title-name">Edge Networking</span></a></li><li><a href="components-elemental.html" class=" "><span class="title-number">14 </span><span class="title-name">Elemental</span></a></li><li><a href="components-k3s.html" class=" "><span class="title-number">15 </span><span class="title-name">K3s</span></a></li><li><a href="components-rke2.html" class=" "><span class="title-number">16 </span><span class="title-name">RKE2</span></a></li><li><a href="components-suse-storage.html" class=" "><span class="title-number">17 </span><span class="title-name">SUSE Storage</span></a></li><li><a href="components-suse-security.html" class=" "><span class="title-number">18 </span><span class="title-name">SUSE Security</span></a></li><li><a href="components-metallb.html" class=" "><span class="title-number">19 </span><span class="title-name">MetalLB</span></a></li><li><a href="components-eco.html" class=" "><span class="title-number">20 </span><span class="title-name">Endpoint Copier Operator</span></a></li><li><a href="components-kubevirt.html" class=" "><span class="title-number">21 </span><span class="title-name">Edge Virtualization</span></a></li><li><a href="components-system-upgrade-controller.html" class=" "><span class="title-number">22 </span><span class="title-name">System Upgrade Controller</span></a></li><li><a href="components-upgrade-controller.html" class=" "><span class="title-number">23 </span><span class="title-name">Upgrade Controller</span></a></li><li><a href="components-suma.html" class=" "><span class="title-number">24 </span><span class="title-name">SUSE Multi-Linux Manager</span></a></li></ol></li><li><a href="id-how-to-guides.html" class="has-children "><span class="title-number">III </span><span class="title-name">How-To Guides</span></a><ol><li><a href="guides-metallb-k3s.html" class=" "><span class="title-number">25 </span><span class="title-name">MetalLB on K3s (using Layer 2 Mode)</span></a></li><li><a href="guides-metallb-k3s-l3.html" class=" "><span class="title-number">26 </span><span class="title-name">MetalLB on K3s (using Layer 3 Mode)</span></a></li><li><a href="guides-metallb-kubernetes.html" class=" "><span class="title-number">27 </span><span class="title-name">MetalLB in front of the Kubernetes API server</span></a></li><li><a href="id-air-gapped-deployments-with-edge-image-builder.html" class=" "><span class="title-number">28 </span><span class="title-name">Air-gapped deployments with Edge Image Builder</span></a></li><li><a href="guides-kiwi-builder-images.html" class=" "><span class="title-number">29 </span><span class="title-name">Building Updated SUSE Linux Micro Images with Kiwi</span></a></li><li><a href="guides-clusterclass-example.html" class=" "><span class="title-number">30 </span><span class="title-name">Using clusterclass to deploy downstream clusters</span></a></li></ol></li><li><a href="tips-and-tricks.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Tips and Tricks</span></a><ol><li><a href="tips-edge-image-builder.html" class=" "><span class="title-number">31 </span><span class="title-name">Edge Image Builder</span></a></li><li><a href="tips-elemental.html" class=" "><span class="title-number">32 </span><span class="title-name">Elemental</span></a></li><li><a href="tips-metal3.html" class=" "><span class="title-number">33 </span><span class="title-name"><span class="strong"><strong>Metal<sup>3</sup></strong></span></span></a></li></ol></li><li><a href="id-third-party-integration.html" class="has-children "><span class="title-number">V </span><span class="title-name">Third-Party Integration</span></a><ol><li><a href="integrations-nats.html" class=" "><span class="title-number">34 </span><span class="title-name">NATS</span></a></li><li><a href="id-nvidia-gpus-on-suse-linux-micro.html" class=" "><span class="title-number">35 </span><span class="title-name">NVIDIA GPUs on SUSE Linux Micro</span></a></li></ol></li><li><a href="day-2-operations.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Day 2 Operations</span></a><ol><li><a href="day2-migration.html" class=" "><span class="title-number">36 </span><span class="title-name">Edge 3.4 migration</span></a></li><li><a href="day2-mgmt-cluster.html" class=" "><span class="title-number">37 </span><span class="title-name">Management Cluster</span></a></li><li><a href="day2-downstream-clusters.html" class=" "><span class="title-number">38 </span><span class="title-name">Downstream clusters</span></a></li></ol></li><li><a href="id-suse-telco-cloud-documentation.html" class="has-children "><span class="title-number">VII </span><span class="title-name">SUSE Telco Cloud Documentation</span></a><ol><li><a href="atip.html" class=" "><span class="title-number">39 </span><span class="title-name">SUSE Telco Cloud</span></a></li><li><a href="atip-architecture.html" class=" "><span class="title-number">40 </span><span class="title-name">Concept &amp; Architecture</span></a></li><li><a href="atip-requirements.html" class=" "><span class="title-number">41 </span><span class="title-name">Requirements &amp; Assumptions</span></a></li><li><a href="atip-management-cluster.html" class=" "><span class="title-number">42 </span><span class="title-name">Setting up the management cluster</span></a></li><li><a href="atip-features.html" class=" "><span class="title-number">43 </span><span class="title-name">Telco features configuration</span></a></li><li><a href="atip-automated-provisioning.html" class=" "><span class="title-number">44 </span><span class="title-name">Fully automated directed network provisioning</span></a></li><li><a href="atip-lifecycle.html" class=" "><span class="title-number">45 </span><span class="title-name">Lifecycle actions</span></a></li></ol></li><li><a href="id-troubleshooting-3.html" class="has-children "><span class="title-number">VIII </span><span class="title-name">Troubleshooting</span></a><ol><li><a href="general-troubleshooting-principles.html" class=" "><span class="title-number">46 </span><span class="title-name">General Troubleshooting Principles</span></a></li><li><a href="troubleshooting-kiwi.html" class=" "><span class="title-number">47 </span><span class="title-name">Troubleshooting Kiwi</span></a></li><li><a href="troubleshooting-edge-image-builder.html" class=" "><span class="title-number">48 </span><span class="title-name">Troubleshooting Edge Image Builder (EIB)</span></a></li><li><a href="troubleshooting-edge-networking.html" class=" "><span class="title-number">49 </span><span class="title-name">Troubleshooting Edge Networking (NMC)</span></a></li><li><a href="troubleshooting-phone-home-scenarios.html" class=" "><span class="title-number">50 </span><span class="title-name">Troubleshooting Phone-Home scenarios</span></a></li><li><a href="troubleshooting-directed-network-provisioning.html" class=" "><span class="title-number">51 </span><span class="title-name">Troubleshooting Directed-network provisioning</span></a></li><li><a href="troubleshooting-other-components.html" class=" "><span class="title-number">52 </span><span class="title-name">Troubleshooting Other components</span></a></li><li><a href="collecting-diagnostics-for-support.html" class=" "><span class="title-number">53 </span><span class="title-name">Collecting Diagnostics for Support</span></a></li></ol></li><li><a href="id-appendix.html" class="has-children "><span class="title-number">IX </span><span class="title-name">Appendix</span></a><ol><li><a href="id-release-notes.html" class=" "><span class="title-number">54 </span><span class="title-name">Release Notes</span></a></li></ol></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="quickstart-mlm-lifecycle" data-id-title="Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Lifecycle Management with SUSE Multi-Linux Manager and Edge Upgrade Controller</span></span> <a title="Permalink" class="permalink" href="quickstart-mlm-lifecycle.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>If you need to manage very large fleets of edge clusters, we recommend to use the following solution blueprint:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Edge nodes are initially installed using images that were created with Edge Image Builder</p></li><li class="listitem"><p>During installation, the Edge nodes are registered to Multi-Linux Manager</p></li><li class="listitem"><p>Each Edge node runs an instance of the Edge Upgrade Controller</p></li><li class="listitem"><p>Multi-Linux Manager automates updates and upgrades by assigning [FIXME] Upgrade Plans [/FIXME] to a managed node. The Edge Upgrade Controller picks up changes and orchestrates the update or upgrade process on the Edge node or a multi-node Edge cluster.</p><div class="verbatim-wrap"><pre class="screen">[FIXME] Image goes here [/FIXME]</pre></div></li></ul></div><section class="sect1" id="id-prerequisites-3" data-id-title="Prerequisites"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5.1 </span><span class="title-name">Prerequisites</span></span> <a title="Permalink" class="permalink" href="quickstart-mlm-lifecycle.html#id-prerequisites-3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>First, follow all steps in <a class="xref" href="quickstart-suma.html" title="Chapter 4. SUSE Multi-Linux Manager">Chapter 4, <em>SUSE Multi-Linux Manager</em></a> to prepare a working Multi-Linux Manager environment.</p><p>The image you build with Edge Image Builder needs to get modified to contain the following additional components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Kubernetes (RKE2) needs to get installed</p></li><li class="listitem"><p>The Edge Upgrade controller container needs to get deployed on Kubernetes</p></li></ul></div><p>Use this YAML template to build an EIB image that contains all necessary parts:</p><div class="verbatim-wrap"><pre class="screen">[FIXME]This is k3s because I couldn't get RKE2 networking right[/FIXME]
[FIXME]Currently using the openSUSE Leap Micro 16 images to avoid SE Linux issues on 6.1. Using a latest KIWI-built image should also work[/FIXME]</pre></div><div class="verbatim-wrap highlight yaml"><pre class="screen">apiVersion: 1.3
image:
  imageType: iso
  arch: x86_64
  baseImage: slemicro.iso
  outputImageName: eib-image.iso
operatingSystem:
  users:
  - username: root
    createHomeDir: true
    encryptedPassword: $6$aaBTHyqDRUMY1HAp$pmBY7.qLtoVlCGj32XR/Ogei4cngc3f4OX7fwBD/gw7HWyuNBOKYbBWnJ4pvrYwH2WUtJLKMbinVtBhMDHQIY0
  keymap: de
  systemd:
    enable:
      - cockpit.socket
  packages:
    noGPGCheck: true
  suma:
    host: ${fully qualified hostname of your SUSE Multi-Linux Manager Server}
    activationKey: 1-edge_stable_x86_64
kubernetes:
  version: v1.33.3+k3s1
  manifests:
    urls:
      - https://k8s.io/examples/application/nginx-app.yaml
  helm:
    charts:
      - name: upgrade-controller
        createNamespace: true
        installationNamespace: kube-system
        repositoryName: upgrade-controller-chart
        targetNamespace: upgrade-controller-system
        version: 304.0.1+up0.1.1
      - name: cert-manager
        repositoryName: jetstack
        targetNamespace: cert-manager
        valuesFile: certmanager.yaml
        version: v1.18.1
        createNamespace: true
        installationNamespace: kube-system
      - name: system-upgrade-controller
        createNamespace: true
        installationNamespace: kube-system
        repositoryName: rancher-charts
        targetNamespace: cattle-system
        version: 107.0.0
    repositories:
      - name: upgrade-controller-chart
        url: oci://registry.suse.com/edge/charts/
      - name: jetstack
        plainHTTP: false
        skipTLSVerify: true
        url: https://charts.jetstack.io
      - name: rancher-charts
        url: https://charts.rancher.io/</pre></div><p>You also need to create an additional directory and provide values for the helm charts:</p><div class="verbatim-wrap"><pre class="screen">mkdir -p /opt/eib/kubernetes/helm/values</pre></div><p>In that folder, you need to create two files:</p><p>certmanager.yaml</p><div class="verbatim-wrap highlight yaml"><pre class="screen">installCRDs: true</pre></div><p>system-upgrade-controller.yaml</p><div class="verbatim-wrap highlight yaml"><pre class="screen">global:
  cattle:
    psp:
      enabled: false</pre></div><p>Once you’ve deployed the image and accepted its key on the MLM server, you can check whether everything is fine from the MLM server’s console. As root, switch to the terminal session within the MLM container:</p><div class="verbatim-wrap"><pre class="screen">mgrctl term</pre></div><p>Check, whether you can reach the managed node and upgrade controller is running:</p><div class="verbatim-wrap"><pre class="screen">[FIXME]kubectl call is different on RKE2![/FIXME]</pre></div><div class="verbatim-wrap"><pre class="screen">salt '{minion ID of your node}' cmd.run --module-executors=[direct_call] '/opt/bin/kubectl get pods -A'</pre></div><p>This will verify that you can reach the managed node ("Salt Minion") from Salt, and that kubectl is set up correctly to be executed by Salt.</p><p>The "--module-executors=[direct_call]" part of the call switches off the transactional update handling in Salt and run the command directly. If you don’t specify this, the call will also succeed, but take significantly longer.</p><p>The result should be a list of all pods running, and it should include "upgrade-controller-system".</p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="quickstart-suma.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 4 </span>SUSE Multi-Linux Manager</span></a> </div><div><a class="pagination-link next" href="id-components.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part II </span>Components</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="quickstart-mlm-lifecycle.html#id-prerequisites-3"><span class="title-number">5.1 </span><span class="title-name">Prerequisites</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2025</span></div></div></footer></body></html>